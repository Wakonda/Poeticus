{% extends generic_layout %}

{% block head_title %}Accueil{% endblock %}

{% block script_additional %}
	<script src="{{ app.request.basepath }}/js/jquery-ui-1.11.0/jquery-ui.min.js"></script>	
	<script src="{{ app.request.basepath }}/js/tag-it-master/js/tag-it.min.js"></script>
	<script type="text/javascript">
		$(function()
		{
			$(".tagit").tagit({
				allowSpaces: true
			});
		});
	</script>
{% endblock %}

{% block style_additional %}
	<link rel="stylesheet" type="text/css" href="{{ app.request.basepath }}/js/jquery-ui-1.11.0/jquery-ui.min.css" />
	<link rel="stylesheet" type="text/css" href="{{ app.request.basepath }}/js/tag-it-master/css/jquery.tagit.css" />
{% endblock %}

{% block main_content %}
	<h2>Rechercher une poésie</h2>
	{% form_theme form 'Form/fields.html.twig' %}
	<form action="{{ path('index_search') }}" method="post" {{ form_enctype(form) }} novalidate>
		<table class="form_grid">
				<tr>
					<th>{{ form_label(form.title) }}</th>
					<td>{{ form_widget(form.title, {'attr':{'class':'full_width'}}) }}</td>
				</tr>
				<tr>
					<th>{{ form_label(form.text) }}</th>
					<td>{{ form_widget(form.text) }}</td>
				</tr>
				<tr>
					<th>{{ form_label(form.author) }}</th>
					<td>{{ form_widget(form.author, {'attr':{'class':'full_width'}}) }}</td>
				</tr>
				<tr>
					<th>{{ form_label(form.country) }}</th>
					<td>{{ form_widget(form.country, {'attr':{'class':'full_width'}}) }}</td>
				</tr>
				<tr>
					<th>{{ form_label(form.collection) }}</th>
					<td>{{ form_widget(form.collection, {'attr':{'class':'full_width'}}) }}</td>
				</tr>
				<tr>
					<th>{{ form_label(form.type) }}</th>
					<td>{{ form_widget(form.type, {'attr':{'class':'full_width'}}) }}</td>
				</tr>
		</table>
		<br>
		{{ form_widget(form.search, {'icon': 'fa-search'}) }}
		{{ form_rest(form) }}
	</form>
	<hr class="flare">
	<h2>Poésie au hasard</h2>
	{% if random is not null %}
	<h3><a href="{{ path('read', {'id' : random.id}) }}" alt="{{ random.title }}">{{ random.title }}</a></h3>
	<div>
		{{ random.text|raw }}
		<hr>
		<a href="{{ path('author', {'id' : random.biography.id }) }}" alt="">{{ random.biography.title }}</a>
		-
		<a href="{{ path('country', {'id' : random.country.id }) }}" alt=""><img class="flag" src="{{ app.request.basepath }}/photo/country/{{ random.country.flag }}" alt="" height="8" /></a>
	</div>
	{% else %}
		<p>Aucune Poésie encore ajoutée.</p>
	{% endif %}
{% endblock %}