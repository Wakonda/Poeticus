{% extends generic_layout %}

{% block head_title %}{{ entity.title }}{% endblock %}

{% block style_additional %}
	<link rel="stylesheet" href="{{ app.request_stack.currentrequest.basepath }}/js/DataTables-1.10.0/media/css/jquery.dataTables.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="{{ app.request_stack.currentrequest.basepath }}/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="{{ app.request_stack.currentrequest.basepath }}/css/bootstrap-theme.min.css"/>
    <link rel="stylesheet" href="{{ app.request_stack.currentrequest.basepath }}/css/dataTables.bootstrap.css"/>
    <link rel="stylesheet" href="{{ app.request_stack.currentrequest.basepath }}/js/datatables-responsive-master/files/1.10/css/datatables.responsive.css"/>
{% endblock %}
{% block script_additional %}
	<script src="{{ app.request_stack.currentrequest.basepath }}/js/datatables-responsive-master/files/1.10/js/datatables.responsive.js"></script>
	<script src="{{ app.request_stack.currentrequest.basepath }}/js/DataTables-1.10.0/media/js/jquery.dataTables.js" type="text/javascript"></script>
	<script src="{{ app.request_stack.currentrequest.basepath }}/js/datatables.extension.js" type="text/javascript"></script>
	<script type="text/javascript">
		$(function ()
		{	
			oTable = $('table.index_directories').dataTable( {
				"oLanguage": {
					"sUrl": "{{ app.request_stack.currentrequest.basepath }}/js/DataTables-1.10.0/language/dataTables.{{ app.request_stack.currentrequest.locale }}.txt"
				},
				"bFilter": true,
				"bInfo": false,
				"bSort": true,
				"bLengthChange": true,
				"sPaginationType": "full_numbers",
				"iDisplayLength": 15,
				"bProcessing": true,
				"bServerSide": true,
				"sAjaxSource": "{{ path('collection_poem_datatables', {'collectionId' : entity.id }) }}",
				"autoWidth": false,	
			});
		});
	</script>
{% endblock %}

{% block main_title %}{{ entity.title }}{% endblock %}
{% block meta_tag_description %}{{ entity.title }} est un recueil de poésies écrit par {{ entity.biography.title }} et publiée {{ (entity.releasedDate is not empty) ? "en "~entity.releasedDate : "à une date inconnue"}}.{% endblock %}

{% block main_content %}
	<p class="center">{{ ("photo/collection/"~entity.image)|max_size_image(app.request_stack.currentrequest.basepath) }}</p>
	<br>
	<div>
		{% set biography = entity.biography %}
		<table class="show">
			<tr>
				<th><span class="bold underline">{{ 'collection.field.Author'|trans }} :</span></th>
				<td><a href="{{ path('author', { 'id' : biography['id'], 'slug' : biography['slug'] }) }}" alt="">{{ biography['title'] }}</a></td>
			</tr>
			<tr>
				<th><span class="bold underline">{{ 'collection.field.PublicationDate'|trans }} :</span></th>
				<td>{{ entity.releasedDate }}</td>
			</tr>
		</table>
		<br>
		{{ entity.text|raw }}
	</div>
	<table class="hidden_print">
		<tbody>
			<tr>
				<td class="socialNetwork">
					<a href="{{ path('collection_pdf', {'collectionId' : entity.id, 'biographyId' : biography['id']}) }}" class="btn btn-default"><i class="fa fa-file-pdf-o fa-2x" aria-hidden="true"></i></a>
				</td>
			</tr>
		</tbody>
	</table>
	<hr>
	<h3>{{ 'collection.field.PoemsInThisCollection'|trans }}</h3>
		<table class="index_directories display">
		<thead>
			<th>{{ 'collection.table.Title'|trans }}</th>
		</thead>
		<tbody>
		</tbody>
	</table>
	<hr>
	{% if entity.widgetProduct|raw is not null %}
		<h3>{{ 'collection.field.BuyThisCollection'|trans }}</h3>
		<div class="center-iframe">{{ entity.widgetProduct|raw }}</div>
	{% endif %}
{% endblock %}